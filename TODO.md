# ScriptFlow - TODO

### P0: Базовая IDE

- [x] Разделена логика по контроллерам (`editor`, `runtime`, `ui`).
- [x] Редактор на `CodeView` с базовой подсветкой Python.
- [x] Отображение имени файла и dirty-метки (`*`) в тулбаре.
- [x] Открытие файлов через SAF `OpenDocument` + persistable URI permissions.
- [x] Сохранение через SAF `CreateDocument` с предложенным именем.
- [x] FAB-кнопка запуска/остановки с переключением иконки и цвета.
- [x] Консоль с типами сообщений (`system`, `output`, `error`).

### P1: Python runtime

- [x] Интегрирован Chaquopy (`com.chaquo.python`).
- [x] Добавлен `PyApplication` в `AndroidManifest.xml`.
- [x] Выполнение Python-кода из редактора в отдельном потоке.
- [x] Перехват `stdout`/`stderr` и traceback в консоль приложения.
- [x] Надежная отмена выполнения Python-скрипта (убийство процесса).
- [x] Потоковый вывод в консоль
- [x] Автопрокрутка и возможность копировать вывод консоли
- [x] Ограничено количество текста консоли (200к символов)

## P1: Ближайшие задачи

- [ ] Реализовать быстрый `Save` в уже открытый URI (без постоянного `CreateDocument`).
- [ ] Accessibility-прототипы (`click`, `swipe`) через отдельный `AccessibilityService`.
- [ ] Инструменты поверх UI: скриншот, пипетка, просмотр координат
- [ ] Установка Python-зависимостей
- [ ] Подключить рабочие действия к `Undo`, `Redo`, `Search`.

## P2: Потом..)

- [ ] Добавить экран настроек редактора (шрифт, тема, перенос, отступы).
- 1/2 Добавить тайм-аут и корректный статус завершения (`timeout`, `stopped`, `error`).
- [ ] Улучшенная подсветка кода (это очень проблематично!)
- [ ] Отладка: точки остановки и пошаговое выполнение.
