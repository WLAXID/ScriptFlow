# ScriptFlow — Developer README

ScriptFlow — Android проект IDE для редактирования Python скриптов с дальнейшим уклоном в системную и UI-автоматизацию. Проект находится в активной разработке. Архитектура и публичные интерфейсы не считаются стабильными и могут меняться.

<p align="center">
  <img src="https://img.shields.io/badge/platform-Android-white" />
  <img src="https://img.shields.io/badge/language-Kotlin-white" />
  <a href="./TODO.md">
    <img src="https://img.shields.io/badge/roadmap-TODO.md-white" />
  </a>
  <a href="./LICENSE">
    <img src="https://img.shields.io/badge/license-MIT-white" />
  </a>
</p>





<p align="center"> <img src="screen.jpg"> </p>

## О чем проект

ScriptFlow задумывается как среда разработки Python скриптов прямо на Android устройствах. В центре проекта — удобный редактор кода, нормальная файловая модель и, на следующих этапах, выполнение Python кода и автоматизация UI через системные механизмы Android.

Развитие идёт поэтапно. Сейчас основной фокус — базовая IDE: редактор, интерфейс, работа с файлами. Интеграция Python runtime и execution engine будет добавлена позже, когда UI и архитектура стабилизируются.

## Требования для разработки

Для работы с проектом нужна актуальная версия Android Studio, JDK версии 11 или выше и стандартный Gradle wrapper, который уже включён в репозиторий. Отдельно ставить Gradle не требуется.

Для запуска приложения нужен эмулятор или реальное устройство с Android 13 (API 33) или выше. В проекте используется `minSdk = 33` и `targetSdk = 36`.

## Сборка и запуск

Проект можно собрать и установить через консоль. В корне репозитория достаточно выполнить сборку и установку debug версии. При первом запуске Gradle загрузит все зависимости, это может занять несколько минут.

Также можно открыть проект напрямую в Android Studio, дождаться синхронизации Gradle, выбрать устройство или эмулятор и запустить приложение стандартной кнопкой Run. Оба способа эквивалентны.

## Используемые технологии

Проект написан на Kotlin и использует AndroidX и Material Components. В качестве редактора кода используется библиотека CodeView версии 1.3.9, поверх которой реализуется подсветка синтаксиса Python и базовое поведение редактора.

Для работы с файлами используется Storage Access Framework. Приложение не получает прямого доступа к файловой системе и не использует устаревшие storage-permissions.

## Работа с файлами

Открытие и сохранение файлов реализовано через SAF. Для открытия используется `OpenDocument`, для сохранения — `CreateDocument`. Приложение работает с URI и запрашивает persistable разрешения на чтение и запись, чтобы файл можно было использовать повторно без постоянного показа диалога выбора.

Из-за использования SAF явные разрешения на доступ к хранилищу не требуются.

## Автоматизация UI

В перспективе проект будет поддерживать автоматизацию UI через `AccessibilityService`. Это включает эмуляцию кликов, свайпов и работу с координатами экрана. Также планируются overlay инструменты вроде пипетки и скриншотера.

Все эти функции будут реализованы через официальные API Android. Для их работы потребуется отдельный `AccessibilityService` и ручное включение пользователем в системных настройках.

## Структура проекта

Проект пока имеет простую структуру. Вся основная логика сосредоточена в `MainActivity.kt`. Это сделано намеренно, чтобы быстрее итеративно менять поведение редактора и UI. После интеграции Python runtime код будет разделён на отдельные модули.

Ресурсы интерфейса находятся в стандартных директориях `res/layout`, `res/drawable` и `res/values`. Конфигурация Gradle стандартная, без нестандартных плагинов.

